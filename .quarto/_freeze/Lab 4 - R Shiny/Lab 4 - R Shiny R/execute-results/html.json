{
  "hash": "6fd8c94925d37a27f039f9b09aba3d32",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"MATH 3190 Lab 4\"\nauthor: \"R Shiny (due 2/7/24)\"\noutput: html_document\neditor_options: \n  chunk_output_type: console\n---\n\n\n\nNow its time to practice what we have learned in class and learn even more! Note that this lab should be completed in R Markdown or Quarto and Knitted to an html document. You will \\`turn in' this homework by uploading to your GitHub Math_3190_Assignment repository in the \"Labs/Lab_4\" directory.\n\n## Problem 1 - K Means Tutorial {.tabset}\n\nThis is a break down for the k-means example shiny app into easy to understand steps, adding a few shiny elements at a time. Is is adapted from the [Kmeans example code from Joe Cheng at Rstudio](https://shiny.rstudio.com/gallery/kmeans-example.html).\n\nFor each step, run the code and see how the app changes. Then below each code chunk, describe exactly what is being changed/added at that step. Make sure to install and load the `shiny` library before you get started.\n\n### Step 00: Template\n\n\n::: {.cell}\n\n```{.r .cell-code}\nui <- fluidPage(\n  \n  # Put a titlePanel here\n  \n  \n  sidebarLayout(\n    # Sidebar. Put your inputs inside the sidebarPanel\n    sidebarPanel(\n      \n    ),\n    \n    # Main panel. put your output plot here\n    mainPanel(\n      \n    )\n  )\n)\n\nserver <- function(input, output, session) {\n\n}\n\nshinyApp(ui = ui, server = server)\n```\n:::\n\n\n### Step 01: Title Panel\n\n\n::: {.cell}\n\n```{.r .cell-code}\nui <- fluidPage(\n  \n  # Put a titlePanel here\n  titlePanel(\"k-means clustering\"),\n  \n  sidebarLayout(\n    # Sidebar. Put your inputs inside the sidebarPanel\n    sidebarPanel(\n      \n    ),\n    \n    # Main panel. put your output plot here\n    mainPanel(\n      \n    )\n  )\n)\n\nserver <- function(input, output, session) {\n  \n}\n\nshinyApp(ui = ui, server = server)\n```\n:::\n\n\n### Step 02: UI inputs\n\n\n::: {.cell}\n\n```{.r .cell-code}\nui <- fluidPage(\n  \n  # Put a titlePanel here\n  titlePanel(\"k-means clustering\"),\n  \n  sidebarLayout(\n    # Sidebar. Put your inputs inside the sidebarPanel\n    sidebarPanel(\n      selectInput('xcol', 'X Variable', names(iris)),\n      selectInput('ycol', 'Y Variable', names(iris),\n                  selected=names(iris)[[2]]),\n      numericInput('clusters', 'Cluster count', 3,\n                   min = 1, max = 9)\n    ),\n    \n    # Main panel. put your output plot here\n    mainPanel(\n      \n    )\n  )\n)\n\nserver <- function(input, output, session) {\n  \n}\n\nshinyApp(ui = ui, server = server)\n```\n:::\n\n\n### Step 03: UI outputs\n\n\n::: {.cell}\n\n```{.r .cell-code}\nui <- fluidPage(\n  \n  # Put a titlePanel here\n  titlePanel(\"k-means clustering\"),\n  \n  sidebarLayout(\n    # Sidebar. Put your inputs inside the sidebarPanel\n    sidebarPanel(\n      selectInput('xcol', 'X Variable', names(iris)),\n      selectInput('ycol', 'Y Variable', names(iris),\n                  selected=names(iris)[[2]]),\n      numericInput('clusters', 'Cluster count', 3,\n                   min = 1, max = 9)\n    ),\n    \n    # Main panel. put your output plot here\n    mainPanel(\n      plotOutput('plot1')\n    )\n  )\n)\n\nserver <- function(input, output, session) {\n  \n}\n\nshinyApp(ui = ui, server = server)\n```\n:::\n\n\n### Step 04: Output plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nui <- fluidPage(\n  \n  # Put a titlePanel here\n  titlePanel(\"k-means clustering\"),\n  \n  sidebarLayout(\n    # Sidebar. Put your inputs inside the sidebarPanel\n    sidebarPanel(\n      selectInput('xcol', 'X Variable', names(iris)),\n      selectInput('ycol', 'Y Variable', names(iris),\n                  selected=names(iris)[[2]]),\n      numericInput('clusters', 'Cluster count', 3,\n                   min = 1, max = 9)\n    ),\n    \n    # Main panel. put your output plot here\n    mainPanel(\n      plotOutput('plot1')\n    )\n  )\n)\n\nserver <- function(input, output, session) {\n  output$plot1 <- renderPlot({\n    plot(iris[,c(\"Sepal.Length\",\"Sepal.Width\")])\n  })\n}\n\nshinyApp(ui = ui, server = server)\n```\n:::\n\n\n### Step 05: Reactive Axes\n\n\n::: {.cell}\n\n```{.r .cell-code}\nui <- fluidPage(\n  \n  # Put a titlePanel here\n  titlePanel(\"k-means clustering\"),\n  \n  sidebarLayout(\n    # Sidebar. Put your inputs inside the sidebarPanel\n    sidebarPanel(\n      selectInput('xcol', 'X Variable', names(iris)),\n      selectInput('ycol', 'Y Variable', names(iris),\n                  selected=names(iris)[[2]]),\n      numericInput('clusters', 'Cluster count', 3,\n                   min = 1, max = 9)\n    ),\n    \n    # Main panel. put your output plot here\n    mainPanel(\n      plotOutput('plot1')\n    )\n  )\n)\n\nserver <- function(input, output, session) {\n  output$plot1 <- renderPlot({\n    plot(iris[,c(input$xcol,input$ycol)])\n  })\n}\n\nshinyApp(ui = ui, server = server)\n```\n:::\n\n\n### Step 06: K means\n\n\n::: {.cell}\n\n```{.r .cell-code}\nui <- fluidPage(\n  \n  # Put a titlePanel here\n  titlePanel(\"k-means clustering\"),\n  \n  sidebarLayout(\n    # Sidebar. Put your inputs inside the sidebarPanel\n    sidebarPanel(\n      selectInput('xcol', 'X Variable', names(iris)),\n      selectInput('ycol', 'Y Variable', names(iris),\n                  selected=names(iris)[[2]]),\n      numericInput('clusters', 'Cluster count', 3,\n                   min = 1, max = 9)\n    ),\n    \n    # Main panel. put your output plot here\n    mainPanel(\n      plotOutput('plot1')\n    )\n  )\n)\n\nserver <- function(input, output, session) {\n\n  output$plot1 <- renderPlot({\n    plot(iris[,c(input$xcol,input$ycol)],\n         col = kmeans(iris[,c(input$xcol,input$ycol)], input$clusters)$cluster)\n  })\n}\n\nshinyApp(ui = ui, server = server)\n```\n:::\n\n\n### Step 07: Cluster centers\n\n\n::: {.cell}\n\n```{.r .cell-code}\nui <- fluidPage(\n  \n  # Put a titlePanel here\n  titlePanel(\"k-means clustering\"),\n  \n  sidebarLayout(\n    # Sidebar. Put your inputs inside the sidebarPanel\n    sidebarPanel(\n      selectInput('xcol', 'X Variable', names(iris)),\n      selectInput('ycol', 'Y Variable', names(iris),\n                  selected=names(iris)[[2]]),\n      numericInput('clusters', 'Cluster count', 3,\n                   min = 1, max = 9)\n    ),\n    \n    # Main panel. put your output plot here\n    mainPanel(\n      plotOutput('plot1')\n    )\n  )\n)\n\nserver <- function(input, output, session) {\n  \n  output$plot1 <- renderPlot({\n    plot(iris[,c(input$xcol,input$ycol)],\n         col = kmeans(iris[,c(input$xcol,input$ycol)], input$clusters)$cluster)\n    points(kmeans(iris[,c(input$xcol,input$ycol)], input$clusters)$centers, pch = 4, cex = 4, lwd = 4)\n  })\n}\n\nshinyApp(ui = ui, server = server)\n```\n:::\n\n\n### Step 08: Save Kmeans\n\n\n::: {.cell}\n\n```{.r .cell-code}\nui <- fluidPage(\n  \n  # Put a titlePanel here\n  titlePanel(\"k-means clustering\"),\n  \n  sidebarLayout(\n    # Sidebar. Put your inputs inside the sidebarPanel\n    sidebarPanel(\n      selectInput('xcol', 'X Variable', names(iris)),\n      selectInput('ycol', 'Y Variable', names(iris),\n                  selected=names(iris)[[2]]),\n      numericInput('clusters', 'Cluster count', 3,\n                   min = 1, max = 9)\n    ),\n    \n    # Main panel. put your output plot here\n    mainPanel(\n      plotOutput('plot1')\n    )\n  )\n)\n\nserver <- function(input, output, session) {\n  \n  clusters <- reactive({\n    kmeans(iris[,c(input$xcol,input$ycol)], input$clusters)\n  })\n  \n  output$plot1 <- renderPlot({\n    plot(iris[,c(input$xcol,input$ycol)],\n         col = clusters()$cluster)\n    points(clusters()$centers, pch = 4, cex = 4, lwd = 4)\n  })\n}\n\nshinyApp(ui = ui, server = server)\n```\n:::\n\n\n### Step 09: Final App\n\n\n::: {.cell}\n\n```{.r .cell-code}\nui <- fluidPage(\n  \n  # Put a titlePanel here\n  titlePanel(\"k-means clustering\"),\n  \n  sidebarLayout(\n    # Sidebar. Put your inputs inside the sidebarPanel\n    sidebarPanel(\n      selectInput('xcol', 'X Variable', names(iris)),\n      selectInput('ycol', 'Y Variable', names(iris),\n                  selected=names(iris)[[2]]),\n      numericInput('clusters', 'Cluster count', 3,\n                   min = 1, max = 9)\n    ),\n    \n    # Main panel. put your output plot here\n    mainPanel(\n      plotOutput('plot1')\n    )\n  )\n)\n\nserver <- function(input, output, session) {\n  \n  selectedData <- reactive({\n    iris[, c(input$xcol, input$ycol)]\n  })\n  \n  clusters <- reactive({\n    kmeans(selectedData(), input$clusters)\n  })\n  \n  output$plot1 <- renderPlot({\n    palette(c(\"#E41A1C\", \"#377EB8\", \"#4DAF4A\", \"#984EA3\",\n              \"#FF7F00\", \"#FFFF33\", \"#A65628\", \"#F781BF\", \"#999999\"))\n    \n    par(mar = c(5.1, 4.1, 0, 1))\n    plot(selectedData(),\n         col = clusters()$cluster,\n         pch = 20, cex = 3)\n    points(clusters()$centers, pch = 4, cex = 4, lwd = 4)\n  })\n}\n\nshinyApp(ui = ui, server = server)\n```\n:::\n\n\n# Problem 2 - R Shiny for mtcars\n\nThe `mtcars` data set was extracted from the 1974 Motor Trend US magazine, and comprises fuel consumption and 10 aspects of automobile design and performance for 32 automobiles (1973â€“74 models). This data set is already built into **R**. You can load it by typing `data(mtcars)`. Once you do that, you should change the `cyl`, `vs`, `am`, `gear`, and `carb` variables to be factors rather than numeric.\n\nYour job is to build an app that has the following:\n\n-   A title for the app.\n-   An input select box that lets the user specify which variable in the data set they are selecting.\n-   An input select box that lets the user specify what type of plot to use, either a histogram, box plot, or bar plot.\n-   The app should then output the plot of the variable that is selcted. The plot should have a nice color, a title, and easy to read axes.\n-   If the variable is quantiative and a bar plot is selected, then a message should appear to the user indicating the wrong type of plot is selected.\n-   Likewise, if the variable is categorical and a histogram or box plot is selected, then a message should appear to the user indicating the wrong type of plot is selected.\n\nSome hints:\n\n-   The app will need a `ui` element, a `server` function, and the last line should be `shinyApp(server = server, ui = ui)`.\n-   Add items to your app one at a time and run it often to make sure things are working as expected.\n-   You'll need both a `renderText()` and a `renderPlot()` function in the server.\n-   `if` statements are very useful in these shiny apps.\n-   The variable selected by the user will be saved as an object in `input$`. You should use the `reactive()` functions to save it as an object in the `server` function and then access it in the `render...()` functions by typing its name with parentheses `()` at the end. For example, if you save it as `var_select` then you will access it as `var_select()` in the `reactive()` functions.\n-   In `ggplot`, we are used to calling the name of the variable we are plotting in the `aes()` function. However, the variable we are plotting is being chosen by the user and is reactive. You can access the variable you want by putting `mtcars` as the first argument in `ggplot` and then by putting `aes(x = .data[[var_select()]])`, if you saved your variable as `var_select` in the server function. That `.data` will refer back to whatever data set you entered into the `ggplot` function. So, it will look like `ggplot(mtcars, aes(x = .data[[var_select()]]))`. Of course, you can change that `x` to an `y` where appropriate.\n\nOne more thing about R Markdown. If you change the **R** code chunk option from `eval = F` to `eval = T` after building your app, the code will run, but the app will not be interactive. It is just a static file. You can make it interaction by adding `runtime: shiny` (not indented) to the bottom of the YAML (under the `editor_options:` section). If you save the file, the Knit button at the top should change to a play button that says \"Run Document\". If you click that, it will make the document interactive. You cannot save and share the output of document in this state, though.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(shiny)\n```\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}